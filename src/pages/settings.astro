---
import Base from "../layouts/Base.astro";
---
<Base title="Portal • Settings">
  <section class="grid gap-6">
    <div class="card p-6 animate-fadeUp">
      <h2 class="text-xl font-semibold mb-3">Appearance</h2>
      <div class="flex flex-wrap gap-2">
        <button class="btn-ghost" id="themeSys">System</button>
        <button class="btn-ghost" id="themeLight">Light</button>
        <button class="btn-ghost" id="themeDark">Dark</button>
        <div class="flex items-center gap-2 ml-2">
          <span class="text-sm text-neutral-300">Font size</span>
          <input type="range" id="fontScale" min="90" max="125" value="100" />
        </div>
      </div>
    </div>

    <div class="card p-6 animate-fadeUp">
      <h2 class="text-xl font-semibold mb-3">Language</h2>
      <div class="flex gap-2">
        <button class="btn-ghost" id="langEn">English</button>
        <button class="btn-ghost" id="langHe">עברית</button>
      </div>
    </div>
  </section>

  <script type="module">
    const root = document.documentElement;
    const ls = localStorage;
    const apply = ()=>{
      const theme = ls.getItem("theme")||"system";
      root.dataset.theme = theme;
      const scale = parseInt(ls.getItem("fontScale")||"100",10);
      root.style.fontSize = scale+"%";
      document.dir = (ls.getItem("lang")||"en")==="he" ? "rtl" : "ltr";
      document.documentElement.lang = ls.getItem("lang")||"en";
    };
    apply();
    document.getElementById("themeSys").onclick = ()=>{ ls.setItem("theme","system"); apply(); };
    document.getElementById("themeLight").onclick = ()=>{ ls.setItem("theme","light"); apply(); };
    document.getElementById("themeDark").onclick = ()=>{ ls.setItem("theme","dark"); apply(); };
    document.getElementById("fontScale").oninput = (e)=>{ ls.setItem("fontScale", e.target.value); apply(); };
    document.getElementById("langEn").onclick = ()=>{ ls.setItem("lang","en"); apply(); };
    document.getElementById("langHe").onclick = ()=>{ ls.setItem("lang","he"); apply(); };
  </script>
</Base>
